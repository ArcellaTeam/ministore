# mini-rs ‚Äî –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Rust

**–ù–∞–¥—ë–∂–Ω—ã–µ, –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –∏ embeddable –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤—ã—Ö —Å–∏—Å—Ç–µ–º –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ.**

> ¬´Complexity kills. It sucks the life out of developers, it makes products difficult to plan, build and test, it introduces security challenges, and it causes end-user and administrator frustration.¬ª  
> ‚Äî *Ray Ozzie*

---

## üß© –°–µ–º–µ–π—Å—Ç–≤–æ `mini`

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|-----------|-----------|--------|
| **[`ministore`](./ministore/)** | WAL-–¥–≤–∏–∂–æ–∫ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSONL. | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| **[`minisnap`](./minisnap/)** | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º–∏ —Å–Ω–∏–º–∫–∞–º–∏ (snapshot) –∏ –∫–æ–º–ø–∞–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π WAL. | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| **[`ministate`](./ministate/)** | –ì–æ—Ç–æ–≤—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–≤–µ—Ä—Ö `ministore` —Å **–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `minisnap`**. | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| **[`miniqueue`](./miniqueue/)** | –ü—Ä–æ—Å—Ç–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –æ—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π durability —á–µ—Ä–µ–∑ `ministore`. | üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ |

–í—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:
- **–í—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ** ‚Äî –æ–¥–∏–Ω –±–∏–Ω–∞—Ä–Ω–∏–∫, —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –≤–Ω–µ—à–Ω–∏–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ (`serde`, `tokio`).
- **–ù–∞–¥—ë–∂–Ω—ã–µ** ‚Äî –∫–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –¥–∏—Å–∫ (`fsync`).
- **–ü—Ä–æ—Å—Ç—ã–µ** ‚Äî < 500 —Å—Ç—Ä–æ–∫ —è–¥—Ä–∞, –±–µ–∑ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á, GC –∏–ª–∏ –º–∞–∫—Ä–æ—Å–æ–≤.
- **–ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–µ** ‚Äî –∂—É—Ä–Ω–∞–ª—ã –ª–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å (`cat`, `jq`).

---

## üéØ –§–∏–ª–æ—Å–æ—Ñ–∏—è

–ö–∞–∂–¥–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤ `mini-rs` —Å–ª–µ–¥—É–µ—Ç —Ç—Ä—ë–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:

1. **–†–µ—à–∞–µ—Ç –æ–¥–Ω—É –∑–∞–¥–∞—á—É** ‚Äî –∏ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –±–µ–∑—É–ø—Ä–µ—á–Ω–æ.
2. **–ù–µ —Å–∫—Ä—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å** ‚Äî –≤—ã –≤—Å–µ–≥–¥–∞ –∑–Ω–∞–µ—Ç–µ, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.
3. **–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç durability** ‚Äî –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ–µ.

–ú—ã –Ω–µ —Å—Ç—Ä–æ–∏–º —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏. –ú—ã —Å—Ç—Ä–æ–∏–º **–∫–∏—Ä–ø–∏—á–∏**, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–±—Ä–∞—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ ‚Äî –æ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–µ–º–æ–Ω–∞ –¥–æ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ –±—Ä–æ–∫–µ—Ä–∞.

> üí° **`minisnap` ‚Äî —ç—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å, –∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ.**  
> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ, —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ WAL —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–º.

---

## üì¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### `ministore`: –Ω–∞–¥—ë–∂–Ω–∞—è –∑–∞–ø–∏—Å—å

```rust
use ministore::MiniStore;

#[derive(serde::Serialize, serde::Deserialize)]
struct Set { value: u32 }

let mut store = MiniStore::open("state/journal.jsonl").await?;
store.append(&Set { value: 42 }).await?; // fsync() –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω

let records: Vec<Set> = MiniStore::replay("state/journal.jsonl").await?;
```

### `ministate`: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (—Å snapshot)

```rust
use ministate::{StateManager, Mutator};

#[derive(Default, Clone, serde::Serialize, serde::Deserialize)]
struct Counter { value: u32 }

#[derive(serde::Serialize, serde::Deserialize)]
struct Inc { by: u32 }

impl Mutator<Counter> for Inc {
    fn apply(&self, state: &mut Counter) {
        state.value += self.by;
    }
}

// Snapshot –≤–∫–ª—é—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Cargo feature: `ministate = { ..., features = ["snapshot"] }`
let manager = StateManager::open("state").await?;
manager.apply(Inc { by: 10 }).await?;
assert_eq!(manager.snapshot().value, 10);

// –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ ‚Äî —Ä—É—á–Ω–æ–π snapshot
#[cfg(feature = "snapshot")]
manager.create_snapshot().await?;
```

### `minisnap` (—Å–∫–æ—Ä–æ): –ø—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–Ω–∏–º–∫–∞–º–∏

```rust
use minisnap::SnapStore;

let snap_store = SnapStore::new("state");
snap_store.create(&my_state).await?;
let (state, seq) = snap_store.restore().await?;
```

---

## üåê –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

- **[Arcella](https://github.com/your-org/arcella)** ‚Äî –º–æ–¥—É–ª—å–Ω–∞—è WebAssembly-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞:
  - `ministate` + `minisnap` ‚Äî –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–µ—Å—Ç—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–π (—Å –∫–æ–º–ø–∞–∫—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π).
- **[walmq](https://github.com/ArcellaTeam/walmq)** ‚Äî –õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π WAL-based –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π: –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ `ministore` + `minisnap`, —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±–∏–Ω–∞—Ä–Ω–æ–º WAL..
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∫—ç—à–∏ –∏ –±—Ä–æ–∫–µ—Ä—ã.
- –°–∏—Å—Ç–µ–º—ã –¥–ª—è IoT, edge-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ embedded-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
- –õ—é–±–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≥–¥–µ **–¥–∞–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–Ω—ã**, –∞ **–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞**.

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `ministore` –Ω–∞ docs.rs](https://docs.rs/ministore)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `ministate` –Ω–∞ docs.rs](https://docs.rs/ministate) *(—Å–∫–æ—Ä–æ)*

---

## ü§ù –í–∫–ª–∞–¥

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º:
- –û—Ç—á—ë—Ç—ã –æ–± –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ API
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –¢–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–ù–µ –∑–Ω–∞–µ—Ç–µ, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å?** –ü—Ä–æ—Å—Ç–æ –æ–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É ‚Äî –º—ã –ø–æ–º–æ–∂–µ–º –Ω–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏–µ.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–î–≤–æ–π–Ω–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è:
- **Apache License 2.0**
- **MIT License**

–í—ã–±–∏—Ä–∞–π—Ç–µ —Ç–æ, —á—Ç–æ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

---

> **mini-rs** ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Ä–æ–∂–¥–∞–µ—Ç—Å—è –∏–∑ –ø—Ä–æ—Å—Ç–æ—Ç—ã.  
> –ü–æ—Å—Ç—Ä–æ–π—Ç–µ —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ –¥–æ–≤–µ—Ä—è—Ç—å.
```

